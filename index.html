<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#a855f7" />

    <link rel="shortcut icon" href="assets/zizi.png" type="image/x-icon" />

    <title>خرس کوچولو</title>

    <link
      rel="preload"
      href="assets/bootstrap.rtl.min.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript
      ><link rel="stylesheet" href="assets/bootstrap.rtl.min.css"
    /></noscript>

    <link
      rel="preload"
      href="assets/bootstrap-icons.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript
      ><link rel="stylesheet" href="assets/bootstrap-icons.css"
    /></noscript>

    <link
      rel="preload"
      href="assets/mich.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript><link rel="stylesheet" href="assets/mich.css" /></noscript>

    <link
      rel="preload"
      href="assets/notyf.min.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript><link rel="stylesheet" href="assets/notyf.min.css" /></noscript>
  </head>
  <body>
    <div id="login-form" class="container py-4" style="max-width: 400px">
      <h2 class="text-center mb-4">ورود به خرس کوچولو</h2>
      <input
        id="username"
        class="form-control mb-2"
        type="text"
        placeholder="نام کاربری"
      />
      <input
        id="password"
        class="form-control mb-3"
        type="password"
        placeholder="رمز عبور"
      />
      <button class="btn btn-purple w-100 mb-3" onclick="login()">ورود</button>
      <p
        id="login-error"
        class="text-danger text-center"
        style="display: none"
      ></p>
    </div>
    <div id="main-content" style="display: none">
      <div class="container py-4">
        <h1 class="text-center text-purple mb-3">
          یادت نره که دوست دارم خرس کوچولو 💜
        </h1>

        <div class="card glassmorph mb-4">
          <div class="card-body">
            <h4 class="card-title text-center">روتین روزانه</h4>
            <ul id="task-list" class="list-group list-group-flush my-3"></ul>
            <div class="input-group mb-3">
              <input
                type="text"
                id="new-task"
                class="form-control"
                placeholder="یه کار جدید ..."
              />
              <button class="btn btn-purple" onclick="addTask()">اضافه</button>
            </div>

            <div class="card glassmorph p-3 mb-4">
              <div class="card-body">
                <!-- <h5 class="text-center mb-3">🍽️ وعده‌های امروز</h5> -->
                <div id="meals" class="d-flex flex-column gap-3">
                  <div>
                    <label class="form-label">🍳 صبحانه</label>
                    <input
                      type="text"
                      id="breakfast"
                      class="form-control"
                      placeholder="چی خوردی؟"
                    />
                  </div>
                  <div>
                    <label class="form-label">🍛 ناهار</label>
                    <input
                      type="text"
                      id="lunch"
                      class="form-control"
                      placeholder="چی خوردی؟"
                    />
                  </div>
                  <div>
                    <label class="form-label">🍔 شام</label>
                    <input
                      type="text"
                      id="dinner"
                      class="form-control"
                      placeholder="چی خوردی؟"
                    />
                  </div>
                  <div>
                    <label class="form-label">🍎 میان‌وعده</label>
                    <input
                      type="text"
                      id="snack"
                      class="form-control"
                      placeholder="اگه خوردی :)"
                    />
                  </div>
                </div>
              </div>
            </div>

            <div class="card glassmorph p-3 mb-4">
              <div class="card-body">
                <h5 class="text-center mb-3">🧘 تمرینات مدیتیشن و تنفس</h5>

                <div class="mb-3">
                  <label class="form-label">نوع تمرین</label>
                  <select id="meditationType" class="form-select">
                    <option value="">انتخاب کن</option>
                    <option value="mindful">🧠 مدیتیشن ذهن آگاه</option>
                    <option value="breathing">🌬️ تنفس عمیق</option>
                    <option value="muscle">💤 ریلکسیشن عضلات</option>
                    <option value="bodyscan">🪷 اسکن بدن</option>
                  </select>
                </div>

                <div class="mb-3">
                  <label class="form-label">مدت تمرین (دقیقه)</label>
                  <input
                    type="number"
                    id="meditationDuration"
                    class="form-control"
                    placeholder="مثلاً ۱۰"
                  />
                </div>

                <div
                  id="meditationDescription"
                  class="small text-muted px-2 py-2 rounded glass"
                  style="display: none"
                ></div>
              </div>
            </div>

            <div class="card glassmorph p-3 mb-4">
              <div class="text-center mb-2">
                <h5 class="fw-bold">🌈 مود امروزت چطوره؟</h5>
              </div>
              <div
                id="moodButtons"
                class="d-flex justify-content-center flex-wrap gap-2"
              >
                <button class="mood-btn" data-mood="😊">😊</button>
                <button class="mood-btn" data-mood="😐">😐</button>
                <button class="mood-btn" data-mood="😔">😔</button>
                <button class="mood-btn" data-mood="😡">😡</button>
                <button class="mood-btn" data-mood="🥱">🥱</button>
                <button class="mood-btn" data-mood="🥳">🥳</button>
              </div>
            </div>

                    <div class="card glassmorph mb-4">
          <div class="card-body">
            <h5 class="text-center">پیگیری خواب 🛌</h5>
            <div class="mb-3">
              <label for="sleep-time" class="form-label">ساعت خواب</label>
              <input type="time" id="sleep-time" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="wake-time" class="form-label">ساعت بیداری</label>
              <input type="time" id="wake-time" class="form-control" />
            </div>
            <button class="btn btn-purple w-100" onclick="saveSleepData()">
              ثبت خواب امروز
            </button>
            <p id="sleep-duration" class="text-center mt-3 text-muted"></p>
          </div>
        </div>

            <button class="btn btn-purple w-100" onclick="submitDay()">
              پایان روتین
            </button>
          </div>
        </div>



        <div class="row g-3">
          <div class="col-md-6">
            <div class="card glassmorph">
              <div class="card-body">
                <h5>یادداشت روز</h5>
                <textarea
                  class="form-control"
                  id="daily-note"
                  rows="4"
                  placeholder="حست امروز چطوره؟ 💭"
                ></textarea>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card glassmorph">
              <div class="card-body">
                <h5>گالری روزانه</h5>
                <input
                  type="file"
                  id="image-upload"
                  class="form-control"
                  accept="image/*"
                />
                <div id="gallery" class="mt-3 d-flex flex-wrap gap-2"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="card glassmorph my-4">
          <div class="card-body text-center">
            <blockquote id="love-quote" class="blockquote"></blockquote>
          </div>
        </div>

        <div class="card glassmorph mb-4">
          <div class="card-body text-center">
            <h5>پیشرفت هفتگی</h5>
            <canvas id="progressChart" height="120"></canvas>
          </div>
        </div>

        <div class="card glassmorph mb-4">
          <div class="card-body text-center">
            <h5>روزهای تکمیل‌شده</h5>
            <div
              id="calendar"
              class="d-flex flex-wrap gap-2 justify-content-center"
            ></div>
          </div>
        </div>

        <div class="text-center">
          <img
            src="assets/zizi.gif"
            width="120"
            loading="lazy"
            alt="bear"
            class="mt-2"
          />
        </div>
      </div>
    </div>

    <div id="imageModal" class="image-modal" onclick="closeModal(event)">
      <button id="closeModalBtn" onclick="closeModal(event)">×</button>
      <img id="modalImage" src="" alt="عکس بزرگ‌شده" />
    </div>

    <script src="assets/chart.js" defer></script>
    <script src="assets/notyf.min.js" defer></script>
    <script src="assets/mich.js" defer></script>

    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("service-worker.js").then((reg) => {
          reg.onupdatefound = () => {
            const newWorker = reg.installing;
            newWorker.onstatechange = () => {
              if (
                newWorker.state === "installed" &&
                navigator.serviceWorker.controller
              ) {
                if (confirm("نسخه جدید آمادست! می‌خوایی رفرش شه؟")) {
                  window.location.reload();
                }
              }
            };
          };
        });
      }
    </script>

    <script>
      const _0x50d775 = _0xd57e;
      function _0xd57e(_0x4640e2, _0xc6f8ca) {
        const _0x397b4e = _0x37ca();
        return (
          (_0xd57e = function (_0x5318c7, _0x4bb611) {
            _0x5318c7 = _0x5318c7 - (-0x152 * 0x10 + -0x1148 + -0x17f * -0x1a);
            let _0x1ac46c = _0x397b4e[_0x5318c7];
            return _0x1ac46c;
          }),
          _0xd57e(_0x4640e2, _0xc6f8ca)
        );
      }
      (function (_0x400ea1, _0x1bb0ce) {
        const _0x1443ee = _0xd57e,
          _0x479dcf = _0x400ea1();
        while (!![]) {
          try {
            const _0x29825b =
              (parseInt(_0x1443ee(0x8e)) /
                (-0x1f * 0x4f + -0x2 * -0xd69 + 0x5c * -0x30)) *
                (parseInt(_0x1443ee(0xa6)) /
                  (0x3 * -0x36 + -0xd5a * -0x1 + -0x65b * 0x2)) +
              (parseInt(_0x1443ee(0x92)) /
                (0x4d2 * -0x3 + -0x3 * 0x712 + -0x723 * -0x5)) *
                (-parseInt(_0x1443ee(0xb2)) /
                  (-0x1 * 0x16fd + -0x16bf + 0x2dc0)) +
              (-parseInt(_0x1443ee(0x8b)) /
                (-0x5b3 * -0x3 + 0xf58 + -0x206c * 0x1)) *
                (parseInt(_0x1443ee(0x85)) /
                  (0x202a * 0x1 + -0x1197 + -0xe8d * 0x1)) +
              (-parseInt(_0x1443ee(0x83)) /
                (0x1957 + -0x47 * -0x1d + -0x215b)) *
                (-parseInt(_0x1443ee(0xad)) /
                  (0x1 * 0x1a53 + 0xfc9 + 0x2a14 * -0x1)) +
              (parseInt(_0x1443ee(0xa0)) / (-0xd16 + 0x339 + 0x9e6)) *
                (-parseInt(_0x1443ee(0x9d)) /
                  (-0x5 * 0x649 + 0x2674 + 0x1 * -0x6fd)) +
              -parseInt(_0x1443ee(0x91)) /
                (-0xa78 + -0x22 * 0x51 + -0x9 * -0x25d) +
              (parseInt(_0x1443ee(0x96)) / (0x18e9 + -0x216 + 0x341 * -0x7)) *
                (parseInt(_0x1443ee(0xac)) / (0x244 + 0xd03 + 0xf3a * -0x1));
            if (_0x29825b === _0x1bb0ce) break;
            else _0x479dcf["push"](_0x479dcf["shift"]());
          } catch (_0x22bd96) {
            _0x479dcf["push"](_0x479dcf["shift"]());
          }
        }
      })(_0x37ca, 0xa7aa6 * -0x2 + -0xd5fa0 + 0x300c41);
      function login() {
        const _0x19ca58 = _0xd57e,
          _0x2766e1 = {
            MPbYW: _0x19ca58(0x8f),
            GsiFg: _0x19ca58(0xaa),
            YOYTG: function (_0x4c5cfa, _0x3fdab4) {
              return _0x4c5cfa === _0x3fdab4;
            },
            iDxOn: _0x19ca58(0xb1),
            DOiaG: _0x19ca58(0x9c),
            ywBma: _0x19ca58(0xb4),
            EFDbT: _0x19ca58(0x97),
            qGkPQ: function (_0x4aec6c) {
              return _0x4aec6c();
            },
            tCatQ: _0x19ca58(0xab) + "r",
            OIpHX:
              _0x19ca58(0x82) +
              _0x19ca58(0x95) +
              _0x19ca58(0xa7) +
              _0x19ca58(0xb6),
            eJfDA: _0x19ca58(0xb5),
          },
          _0x4d87c8 = document[_0x19ca58(0xa5) + _0x19ca58(0x93)](
            _0x2766e1[_0x19ca58(0x99)]
          )[_0x19ca58(0xa3)][_0x19ca58(0x9b)](),
          _0x19bee0 = document[_0x19ca58(0xa5) + _0x19ca58(0x93)](
            _0x2766e1[_0x19ca58(0x9f)]
          )[_0x19ca58(0xa3)];
        if (
          _0x2766e1[_0x19ca58(0xb0)](_0x4d87c8, _0x2766e1[_0x19ca58(0x8c)]) &&
          _0x2766e1[_0x19ca58(0xb0)](_0x19bee0, _0x2766e1[_0x19ca58(0x8d)])
        )
          localStorage[_0x19ca58(0xaf)](
            _0x2766e1[_0x19ca58(0x80)],
            _0x2766e1[_0x19ca58(0xa4)]
          ),
            _0x2766e1[_0x19ca58(0x9a)](showMainContent);
        else {
          const _0x36206c = document[_0x19ca58(0xa5) + _0x19ca58(0x93)](
            _0x2766e1[_0x19ca58(0x7f)]
          );
          (_0x36206c[_0x19ca58(0x86) + "t"] = _0x2766e1[_0x19ca58(0xa2)]),
            (_0x36206c[_0x19ca58(0x8a)][_0x19ca58(0xa1)] =
              _0x2766e1[_0x19ca58(0x90)]);
        }
      }
      function showMainContent() {
        const _0x5ebfb1 = _0xd57e,
          _0x1b102c = {
            JbVBU: _0x5ebfb1(0x87),
            ZRMib: _0x5ebfb1(0xa8),
            XlToS: _0x5ebfb1(0x84) + "nt",
            ewfNK: _0x5ebfb1(0xb5),
          };
        (document[_0x5ebfb1(0xa5) + _0x5ebfb1(0x93)](
          _0x1b102c[_0x5ebfb1(0x9e)]
        )[_0x5ebfb1(0x8a)][_0x5ebfb1(0xa1)] = _0x1b102c[_0x5ebfb1(0x88)]),
          (document[_0x5ebfb1(0xa5) + _0x5ebfb1(0x93)](
            _0x1b102c[_0x5ebfb1(0xae)]
          )[_0x5ebfb1(0x8a)][_0x5ebfb1(0xa1)] = _0x1b102c[_0x5ebfb1(0x89)]);
      }
      function _0x37ca() {
        const _0x328be5 = [
          "getElement",
          "42LtWeOR",
          "ور\x20اشتباه\x20",
          "none",
          "XcKJh",
          "password",
          "login-erro",
          "55519087tUIebZ",
          "160pwsqpJ",
          "XlToS",
          "setItem",
          "YOYTG",
          "zizi",
          "548248dzVcuL",
          "zFWNi",
          "isLoggedIn",
          "block",
          "است.",
          "getItem",
          "tCatQ",
          "ywBma",
          "onload",
          "نام\x20کاربری",
          "87423PPdyQv",
          "main-conte",
          "12TfXOpL",
          "textConten",
          "login-form",
          "ZRMib",
          "ewfNK",
          "style",
          "4368075RncbYp",
          "iDxOn",
          "DOiaG",
          "73641WiqgRE",
          "username",
          "eJfDA",
          "3464021sDpcWP",
          "39sHluUt",
          "ById",
          "hmkPb",
          "\x20یا\x20رمز\x20عب",
          "12JuRTxk",
          "true",
          "ifTJx",
          "MPbYW",
          "qGkPQ",
          "trim",
          "3333",
          "630520egXwTY",
          "JbVBU",
          "GsiFg",
          "189lyseVa",
          "display",
          "OIpHX",
          "value",
          "EFDbT",
        ];
        _0x37ca = function () {
          return _0x328be5;
        };
        return _0x37ca();
      }
      window[_0x50d775(0x81)] = () => {
        const _0x114864 = _0x50d775,
          _0x537b12 = {
            ifTJx: function (_0x3522b6, _0x2a106b) {
              return _0x3522b6 === _0x2a106b;
            },
            hmkPb: _0x114864(0xb4),
            XcKJh: _0x114864(0x97),
            zFWNi: function (_0x4565ca) {
              return _0x4565ca();
            },
          };
        _0x537b12[_0x114864(0x98)](
          localStorage[_0x114864(0x7e)](_0x537b12[_0x114864(0x94)]),
          _0x537b12[_0x114864(0xa9)]
        ) && _0x537b12[_0x114864(0xb3)](showMainContent);
      };
    </script>
  </body>
</html>
