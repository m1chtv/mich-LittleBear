<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#a855f7" />

    <link rel="shortcut icon" href="assets/zizi.png" type="image/x-icon" />

    <title>خرس کوچولو</title>

    <link
      rel="preload"
      href="assets/bootstrap.rtl.min.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript
      ><link rel="stylesheet" href="assets/bootstrap.rtl.min.css"
    /></noscript>

    <link
      rel="preload"
      href="assets/bootstrap-icons.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript
      ><link rel="stylesheet" href="assets/bootstrap-icons.css"
    /></noscript>

    <link
      rel="preload"
      href="assets/mich.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript><link rel="stylesheet" href="assets/mich.css" /></noscript>

    <link
      rel="preload"
      href="assets/notyf.min.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript><link rel="stylesheet" href="assets/notyf.min.css" /></noscript>
  </head>
  <body>
    <div id="main-content" style="display: none">
      <div class="container py-4">

        <div class="card glassmorph mb-4">
          <div class="card-body">
            <h4 class="card-title text-center">روتین روزانه</h4>
            <ul id="task-list" class="list-group list-group-flush my-3"></ul>
            <div class="input-group mb-3">
              <input
                type="text"
                id="new-task"
                class="form-control"
                placeholder="یه کار جدید ..."
              />
              <button class="btn btn-purple" onclick="addTask()">اضافه</button>
            </div>

            <div class="card glassmorph p-3 mb-4">
              <div class="card-body">
                <!-- <h5 class="text-center mb-3">🍽️ وعده‌های امروز</h5> -->
                <div id="meals" class="d-flex flex-column gap-3">
                  <div>
                    <label class="form-label">🍳 صبحانه</label>
                    <input
                      type="text"
                      id="breakfast"
                      class="form-control"
                      placeholder="چی خوردی؟"
                    />
                  </div>
                  <div>
                    <label class="form-label">🍛 ناهار</label>
                    <input
                      type="text"
                      id="lunch"
                      class="form-control"
                      placeholder="چی خوردی؟"
                    />
                  </div>
                  <div>
                    <label class="form-label">🍔 شام</label>
                    <input
                      type="text"
                      id="dinner"
                      class="form-control"
                      placeholder="چی خوردی؟"
                    />
                  </div>
                  <div>
                    <label class="form-label">🍎 میان‌وعده</label>
                    <input
                      type="text"
                      id="snack"
                      class="form-control"
                      placeholder="اگه خوردی :)"
                    />
                  </div>
                </div>
              </div>
            </div>

            <div class="card glassmorph p-3 mb-4">
              <div class="card-body">
                <h5 class="text-center mb-3">🧘 تمرینات مدیتیشن و تنفس</h5>

                <div class="mb-3">
                  <label class="form-label">نوع تمرین</label>
                  <select id="meditationType" class="form-select">
                    <option value="">انتخاب کن</option>
                    <option value="mindful">🧠 مدیتیشن ذهن آگاه</option>
                    <option value="breathing">🌬️ تنفس عمیق</option>
                    <option value="muscle">💤 ریلکسیشن عضلات</option>
                    <option value="bodyscan">🪷 اسکن بدن</option>
                  </select>
                </div>

                <div class="mb-3">
                  <label class="form-label">مدت تمرین (دقیقه)</label>
                  <input
                    type="number"
                    id="meditationDuration"
                    class="form-control"
                    placeholder="مثلاً ۱۰"
                  />
                </div>

                <div
                  id="meditationDescription"
                  class="small text-muted px-2 py-2 rounded glass"
                  style="display: none"
                ></div>
              </div>
            </div>

            <div class="card glassmorph p-3 mb-4">
              <div class="text-center mb-2">
                <h5 class="fw-bold">🌈 مود امروزت چطوره؟</h5>
              </div>
              <div
                id="moodButtons"
                class="d-flex justify-content-center flex-wrap gap-2"
              >
                <button class="mood-btn" data-mood="😊">😊</button>
                <button class="mood-btn" data-mood="😐">😐</button>
                <button class="mood-btn" data-mood="😔">😔</button>
                <button class="mood-btn" data-mood="😡">😡</button>
                <button class="mood-btn" data-mood="🥱">🥱</button>
                <button class="mood-btn" data-mood="🥳">🥳</button>
              </div>
            </div>

                    <div class="card glassmorph mb-4">
          <div class="card-body">
            <h5 class="text-center">پیگیری خواب 🛌</h5>
            <div class="mb-3">
              <label for="sleep-time" class="form-label">ساعت خواب</label>
              <input type="time" id="sleep-time" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="wake-time" class="form-label">ساعت بیداری</label>
              <input type="time" id="wake-time" class="form-control" />
            </div>
            <button class="btn btn-purple w-100" onclick="saveSleepData()">
              ثبت خواب امروز
            </button>
            <p id="sleep-duration" class="text-center mt-3 text-muted"></p>
          </div>
        </div>

            <button class="btn btn-purple w-100" onclick="submitDay()">
              پایان روتین
            </button>
          </div>
        </div>



        <div class="row g-3">
          <div class="col-md-6">
            <div class="card glassmorph">
              <div class="card-body">
                <h5>یادداشت روز</h5>
                <textarea
                  class="form-control"
                  id="daily-note"
                  rows="4"
                  placeholder="حست امروز چطوره؟ 💭"
                ></textarea>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card glassmorph">
              <div class="card-body">
                <h5>گالری روزانه</h5>
                <input
                  type="file"
                  id="image-upload"
                  class="form-control"
                  accept="image/*"
                />
                <div id="gallery" class="mt-3 d-flex flex-wrap gap-2"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="card glassmorph my-4">
          <div class="card-body text-center">
            <blockquote id="love-quote" class="blockquote"></blockquote>
          </div>
        </div>

        <div class="card glassmorph mb-4">
          <div class="card-body text-center">
            <h5>پیشرفت هفتگی</h5>
            <canvas id="progressChart" height="120"></canvas>
          </div>
        </div>

        <div class="card glassmorph mb-4">
          <div class="card-body text-center">
            <h5>روزهای تکمیل‌شده</h5>
            <div
              id="calendar"
              class="d-flex flex-wrap gap-2 justify-content-center"
            ></div>
          </div>
        </div>

        <div class="text-center">
          <img
            src="assets/zizi.gif"
            width="120"
            loading="lazy"
            alt="bear"
            class="mt-2"
          />
        </div>
      </div>
    </div>

    <div id="imageModal" class="image-modal" onclick="closeModal(event)">
      <button id="closeModalBtn" onclick="closeModal(event)">×</button>
      <img id="modalImage" src="" alt="عکس بزرگ‌شده" />
    </div>

    <script src="assets/chart.js" defer></script>
    <script src="assets/notyf.min.js" defer></script>
    <script src="assets/mich.js" defer></script>

    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("service-worker.js").then((reg) => {
          reg.onupdatefound = () => {
            const newWorker = reg.installing;
            newWorker.onstatechange = () => {
              if (
                newWorker.state === "installed" &&
                navigator.serviceWorker.controller
              ) {
                if (confirm("نسخه جدید آمادست! می‌خوایی رفرش شه؟")) {
                  window.location.reload();
                }
              }
            };
          };
        });
      }
    </script>
  </body>
</html>
